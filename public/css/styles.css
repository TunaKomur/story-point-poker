/* =========================
   Base
========================= */
body {
  height: 100%;
  margin: 0;
  font-family: Arial, sans-serif;
  background: #2b2b2b;
  color: #fff;
}

.hidden {
  display: none;
}

input,
select,
button {
  padding: 10px;
  border-radius: 6px;
  border: 0;
  outline: 0;
}

button {
  cursor: pointer;
}

/* =========================
   Layout
========================= */
.layout {
  display: flex;
  height: 100vh;
  min-height: 100dvh;
}

.sidebar {
  width: 260px;
  background: #3a3a3a;
  padding: 18px;
  box-sizing: border-box;

  display: flex;
  flex-direction: column;
}

.main {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  gap: 14px;

  /* theme background system */
  position: relative;
  overflow: hidden;
  /* taşan efektleri keser */
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}

/* okunabilirlik için karartma katmanı */
.main::before {
  content: "";
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.25);
  pointer-events: none;
  z-index: 0;
}

/* .main içindeki her şey üstte kalsın */
.main>* {
  position: relative;
  z-index: 1;
}

/* =========================
   Themes
========================= */
.main[data-theme="valentines"] {
  background-image: url("/themes/valentines.jpg");
}

/* =========================
   Sidebar (Players)
========================= */
.playersTitle {
  font-size: 18px;
  font-weight: bold;
  margin-bottom: 10px;
}

#playersList {
  flex: 1;
  /* footer’ı alta iter */
}

.playerRow {
  display: flex;
  justify-content: space-between;
  align-items: center;
  /* içerik değişse de dikey sabit */
  padding: 8px 0;
  /* daha stabil */
  min-height: 38px;
  /* çizgi kaymasını bitirir */
  border-bottom: 1px solid rgba(255, 255, 255, 0.15);
  box-sizing: border-box;
}

/* Sol taraf (isim) */
.playerLeft {
  display: flex;
  align-items: center;
  gap: 8px;
}

/* Sağ taraf (admin badge + ikon aynı yerde sabit) */
.playerRight {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 10px;
  min-width: 90px;
  /* sağ blok sabit genişlik */
}

/* Tick/Hourglass için SABİT slot */
.statusSlot {
  width: 26px;
  /* ✓ gelince kayma olmaz */
  text-align: right;
  display: inline-block;
}

/* İçindeki ikonların ölçüsü sabit olsun */
.tick,
.hourglass {
  display: inline-block;
  width: 26px;
  text-align: right;
  line-height: 1;
}

/* Admin badge artık sağda olacağı için margin-left kaldır */
.adminBadge {
  font-size: 12px;
  padding: 2px 8px;
  background: #ff9800;
  border-radius: 999px;
  margin-left: 0;
  line-height: 1.2;
  white-space: nowrap;
}

.tick {
  color: #00e676;
  font-weight: bold;
}

.hourglass {
  color: #ff9800;
  /* sarı/turuncu */
  font-weight: bold;
}

.adminBadge {
  font-size: 12px;
  padding: 2px 6px;
  background: #ff9800;
  border-radius: 8px;
  margin-left: 6px;
}

.sidebarFooter {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.45);
  padding: 12px 6px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);

  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  text-align: left;
  /* flex varken center'a gerek yok */
}

.sidebarFooter span {
  font-weight: 600;
  color: rgba(255, 255, 255, 0.65);
}

.sidebarLogo {
  width: 20px;
  height: 20px;
  object-fit: contain;
  opacity: 0.75;
}

/* =========================
   Login
========================= */
.loginBox {
  display: flex;
  flex-direction: column;
  gap: 10px;
  min-width: 320px;
}

.loginWrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 14px;
}

.loginTitle {
  margin: 0 0 12px 0;
  text-align: center;
}

/* input + select + button genişliği eşitlensin */
.loginWrapper input,
.loginWrapper select,
.loginWrapper button {
  width: 100%;
  max-width: 360px;
  box-sizing: border-box;
}

/* Role toggle buttons */
.roleToggle {
  display: flex;
  width: 100%;
  max-width: 360px;
  gap: 12px;
}

.roleBtn {
  flex: 1;
  padding: 10px;
  border-radius: 10px;
  border: 0;
  background: #ffffff;
  color: #111;
  cursor: pointer;
  font-weight: 500;
  font-size: 15px;
}

.roleBtn.active {
  color: #fff;
}

/* User seçiliyse mavi */
.roleBtn.user-active {
  background: #5bbfd3;
  color: #fff;
}

.roleBtn.admin-active {
  background: #ff9800;
  color: #fff;
}

.roleBtn.disabled {
  opacity: 0.55;
  cursor: not-allowed;
}

.roleBtn.disabled:hover {
  filter: none;
}

/* error messages */
#joinError,
#revealError {
  color: #ff5252;
  text-align: center;
  margin-top: 8px;
  font-weight: 600;
}

/* =========================
   Cards
========================= */
.cardsWrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.cardsTitle {
  margin: 0 0 16px 0;
  text-align: center;
}

.cards {
  display: grid;
  grid-template-columns: repeat(6, 80px);
  gap: 10px;
  justify-content: center;
}

.card {
  width: 80px;
  height: 80px;
  background: #4a4a4a;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 10px;
  cursor: pointer;
  user-select: none;
  border: 2px solid transparent;
  transition: transform 160ms ease, box-shadow 160ms ease, filter 160ms ease;
  will-change: transform;
}

.card.selected {
  background: #00bcd4;
}

.card:hover {
  transform: translateY(-6px) scale(1.06);
  box-shadow: 0 10px 22px rgba(0, 0, 0, 0.35);
  filter: brightness(1.05);
}

.card.selected:hover {
  transform: translateY(-6px) scale(1.03);
}

.cards.locked .card {
  cursor: not-allowed;
  opacity: 0.75;
}

.cards.locked .card:hover {
  transform: none;
  box-shadow: none;
  filter: none;
}

/* =========================
   Admin Controls
========================= */
.controls {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 18px;
  width: 100%;
  max-width: 720px;
  margin-left: auto;
  margin-right: auto;
}

/* =========================
   Admin Buttons UX (disabled + hover)
========================= */
.controls button {
  background: rgba(255, 255, 255, 0.92);
  color: #111;
  font-weight: 600;
  border-radius: 999px;
  min-height: 48px;
  transition: filter 160ms ease, transform 160ms ease, opacity 160ms ease;
  transform: none;
  width: 100%;
  /* container kadar uzar */
  max-width: 520px;
  /* çok abartmasın */
}

/* Aktifken hover -> hafif koyulaşsın */
.controls button:hover:not(:disabled) {
  filter: brightness(0.92);
}

/* Kart seçilmediyse silik + tıklanamaz */
.controls button:disabled {
  opacity: 0.45;
  cursor: not-allowed;
  filter: grayscale(0.2);
  transform: none;
}

/* =========================
   Chart + Confetti
========================= */
#pieChart {
  margin-top: 0; /* veya bu bloğu tamamen silebilirsin */
}

.chartWrap {
  position: relative;
  width: 520px;
  height: 320px;

  margin-top: 18px;   /* ✅ Buton → Grafik aralığı */
}

#pieChart,
#confettiCanvas {
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%); /* ✅ Tam ortalar */
}

#confettiCanvas {
  pointer-events: none;
}

canvas {
  max-width: 520px;
  max-height: 320px;
}

/* =========================
   Responsive (Mobile)
   - Portrait: top players bar
   - Landscape: keep desktop layout
========================= */
/* ---------- PHONE: PORTRAIT ---------- */
@media (max-width: 820px) and (orientation: portrait) {
  .layout {
    flex-direction: column;
    /* sidebar üstte, main altta */
    height: auto;
    min-height: 100dvh;
  }

  /* Sidebar artık üst bar */
  .sidebar {
    width: 100%;
    padding: 12px 12px 10px 12px;
    flex-direction: column;
    gap: 8px;

    position: sticky;
    /* yapışık */
    top: 0;
    /* en üste sabitle */
    z-index: 999;
    /* main üstünde kalsın */
    background: #3a3a3a;
    /* alttaki resim görünmesin */
  }

  .playersTitle {
    margin: 0;
    font-size: 16px;
  }

  /* Players list yatay kaydırmalı bar */
  #playersList {
    display: flex;
    flex-direction: row;
    gap: 10px;
    overflow-x: auto;
    overflow-y: hidden;
    padding-bottom: 6px;
    scrollbar-width: none;
    /* Firefox */
  }

  #playersList::-webkit-scrollbar {
    display: none;
    /* Chrome/Safari */
  }

  /* Her oyuncu "pill" gibi görünsün */
  .playerRow {
  flex: 0 0 auto;
  align-items: center;
  gap: 10px;
  padding: 8px 10px;
  border-bottom: 0;
  border-radius: 12px;
  background: rgba(255, 255, 255, 0.06);

  /* ✅ kutuyu gereksiz uzatma */
  min-width: 0;            /* max-content'i iptal */
  width: fit-content;      /* içeriğe göre küçül */
  max-width: 90%;          /* çok uzun isimde ekranı taşırmasın */
}

.playerLeft {
  min-width: 0;          /* ✅ ellipsis için şart */
  max-width: 160px;      /* ✅ pill aşırı uzamasın (istersen 140-180 arası oynarız) */
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.playerRight {
  min-width: 0;
  flex: 0 0 auto; /* sağ taraf içerik kadar */
}

  /* Sağdaki tick/saat daha net */
  .tick,
  .hourglass {
    font-size: 16px;
  }

  /* Footer mobilde gereksiz yer kaplamasın */
  .sidebarFooter {
    display: none;
  }

  /* Main alan tam genişlik */
  .main {
    width: 100%;
    padding: 14px 12px 18px 12px;
    padding-top: 18px;
    padding-bottom: 48px;
    box-sizing: border-box;
    justify-content: flex-start;
  }

  /* Login kutusu telefona sığsın */
  .loginBox {
    min-width: 0;
    width: 100%;
  }

  /* Kartlar: telefonda otomatik sığacak şekilde */
  /* ✅ Telefon dikey: kart boyutu SABİT kalsın */
.cards {
  --card: 104px; /* burası kartların "büyük" sabit hali — gerekirse 96/104/112 oynarız */

  grid-template-columns: repeat(3, var(--card));
  justify-content: center;   /* grid ortalansın */
  width: 100%;
  max-width: 520px;
  gap: 12px;                 /* biraz daha ferah görünür */
}

.card {
  width: var(--card);
  height: var(--card);
  aspect-ratio: auto;        /* ✅ artık aspect-ratio ile esnemesin */
  font-size: 18px;
  border-radius: 14px;
}

  /* Admin butonları alt alta/yan yana sığsın */
  .controls {
    flex-wrap: wrap;
    gap: 10px;
    max-width: 520px;
  }

  .controls button {
    flex: 1 1 240px;
    min-height: 44px;
    font-size: 14px;
    border-radius: 12px;
  }

  /* Chart mobilde taşmasın */
  .chartWrap {
    width: 100%;
    max-width: 520px;
      margin-top: 18px;     /* ✅ Mobilde de buton-grafik boşluğu sabit */
    margin-bottom: 20px;
    height: auto;
    aspect-ratio: 520 / 320;
  }

  canvas {
    max-width: 100%;
    max-height: 100%;
  }
}

/* ---------- PHONE: LANDSCAPE ---------- */
/* Yatayda desktop gibi kalsın ama sıkışmayı azalt */
@media (max-width: 950px) and (orientation: landscape) {

  /* 100vh kilidini kır -> içerik uzayabilsin */
  .layout {
    height: auto;
    min-height: 100dvh;
  }

  /* main kendi içinde scroll edebilsin */
  .main {
    overflow-y: auto;
    overflow-x: hidden;
    padding: 16px 12px 28px 12px;
    justify-content: flex-start;
  }

  /* sidebar sabit + kendi içinde düzen */
  .sidebar {
    width: 240px;
    flex: 0 0 240px;

    position: sticky;
    top: 0;
    align-self: flex-start;
    height: 100dvh;

    display: flex;
    flex-direction: column;
    overflow: hidden;
    /* ✅ footer arkasına taşmayı engeller */
  }

  /* Sadece oyuncu listesi kayacak */
  #playersList {
    flex: 1;
    overflow-y: auto;
    padding-bottom: 10px;
  }

  /* Footer hep en altta, üstte kalır */
  .sidebarFooter {
    flex: 0 0 auto;
    background: #3a3a3a;
    position: relative;
    z-index: 5;
  }

  /* kartlar biraz küçülsün */
  .cards {
    grid-template-columns: repeat(6, 70px);
    gap: 10px;
  }

  .card {
    width: 70px;
    height: 70px;
  }

  /* chart alanı taşmasın */
  .chartWrap {
    width: 520px;
    max-width: 520px;
    height: 320px;
    margin-bottom: 20px;
  }
}

/* =========================
   Back Button (Top-Left in .main)
========================= */
.backBtn {
  position: absolute;
  top: 16px;
  left: 16px;
  z-index: 5;
  /* .main::before üstünde olsun */

  width: 44px;
  height: 44px;
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.18);

  background: rgba(0, 0, 0, 0.35);
  color: #fff;

  display: flex;
  align-items: center;
  justify-content: center;

  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

.backBtn:hover {
  filter: brightness(1.08);
}

.backBtn:active {
  transform: scale(0.98);
}

.backIcon {
  font-size: 22px;
  line-height: 1;
  font-weight: 700;
}

.backBtn.hidden {
  display: none;
}

/* =========================
   Recommended Point (under chart)
========================= */
.recommendedWrap {
  margin-top: 18px;
  display: flex;
  justify-content: center;
  width: 100%;
}

.recommendedText {
  background: rgba(0, 0, 0, 0.35);
  border: 1px solid rgba(255,255,255,0.18);
  padding: 10px 16px;
  border-radius: 14px;
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);

  font-weight: 700;
  font-size: 16px;
  letter-spacing: 0.2px;
}

.recommendedWrap.hidden {
  display: none;
}